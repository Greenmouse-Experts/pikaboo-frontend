(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{73406:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return a(93148)}])},93148:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return _}});var r=a(85893),t=a(67294),l=a(13619),n=a(37294),d=a(12633),i=a(70545),o=a(22920),c=a(25675),m=a.n(c),x=a(1988),u=a(63750),h=a(89583),p=a(5434),j=a(14057),v=a(87536),w=a(88843),f=a(79008),g=a(78524);a(45516);var N=e=>{let{close:s}=e,a=(0,l.CG)(e=>e.user.user),[n,c]=(0,t.useState)(!1),[m]=(0,d.wm)(),x=(0,l.TL)(),{control:u,handleSubmit:h,setError:p,formState:{errors:N,isValid:b}}=(0,v.cI)({mode:"onChange",defaultValues:{first_name:a.firstname,last_name:a.lastname,email:a.email,phone:a.phone||""}}),y=async e=>{c(!0),await m(e).then(e=>{if(e.data.success)x((0,i.JR)({...l.h.getState().user.user,firstname:e.data.data.first_name,lastname:e.data.data.last_name,email:e.data.data.email,phone:e.data.data.phone})),o.Am.success(e.data.message),s();else{var a;Object.entries(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.errors).forEach(e=>{let[s,a]=e;o.Am.error(a[0])}),c(!1)}}).catch(e=>{var s;o.Am.error(null==e?void 0:null===(s=e.error)||void 0===s?void 0:s.data.message),c(!1)})};return(0,r.jsx)("div",{children:(0,r.jsxs)("form",{className:"fs-600",onSubmit:h(y),children:[(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-4",children:[(0,r.jsx)(v.Qr,{name:"first_name",control:u,rules:{required:{value:!0,message:"Please enter your first name"}},render:e=>{var s;let{field:a}=e;return(0,r.jsx)(w.Z,{label:"First Name",error:null===(s=N.first_name)||void 0===s?void 0:s.message,type:w.n.text,...a})}}),(0,r.jsx)(v.Qr,{name:"last_name",control:u,rules:{required:{value:!0,message:"Please enter your last name"}},render:e=>{var s;let{field:a}=e;return(0,r.jsx)(w.Z,{label:"Last Name",error:null===(s=N.last_name)||void 0===s?void 0:s.message,type:w.n.text,...a})}}),(0,r.jsx)(v.Qr,{name:"email",control:u,rules:{required:{value:!0,message:"Please enter your email"}},render:e=>{var s;let{field:a}=e;return(0,r.jsx)(w.Z,{label:"Email",error:null===(s=N.email)||void 0===s?void 0:s.message,type:w.n.email,...a})}}),(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("label",{className:"mb-2 mt-2 block text-gray-500",children:"Phone Number"}),(0,r.jsx)(g.Z,{international:!0,defaultCountry:"NG",name:"phone",control:u,rules:{required:!0},className:"border lg:p-2 p-2 border-gray-400 rounded outline-none"}),N.phone&&(0,r.jsx)("p",{className:"error text-red-500 fw-500",children:"Invalid Phone Number"})]})]}),(0,r.jsx)("div",{className:"mt-10",children:(0,r.jsx)(j.Z,{title:n?(0,r.jsx)(f.Gh,{size:13,color:"white"}):"Update Profile",disabled:!b})})]})})},b=e=>{let{close:s}=e,[a,l]=(0,t.useState)(!1),[n]=(0,d.yU)(),{control:i,handleSubmit:c,watch:m,setError:x,formState:{errors:u,isValid:h}}=(0,v.cI)({mode:"onChange",defaultValues:{old_password:"",new_password:"",new_password_confirmation:""}}),p=async e=>{l(!0),await n(e).then(e=>{if(e.data.success)o.Am.success(e.data.message),s();else{var a;Object.entries(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.errors).forEach(e=>{let[s,a]=e;o.Am.error(a[0])}),l(!1)}}).catch(e=>{var s;o.Am.error(null==e?void 0:null===(s=e.error)||void 0===s?void 0:s.data.message),l(!1)})};return(0,r.jsx)("div",{children:(0,r.jsxs)("form",{className:"fs-600",onSubmit:c(p),children:[(0,r.jsx)("div",{children:(0,r.jsx)(v.Qr,{name:"old_password",control:i,rules:{required:{value:!0,message:"Password is required"}},render:e=>{var s;let{field:a}=e;return(0,r.jsx)(w.Z,{label:"Old Password",error:null===(s=u.old_password)||void 0===s?void 0:s.message,type:w.n.password,...a})}})}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(v.Qr,{name:"new_password",control:i,rules:{required:{value:!0,message:"Password is required"},minLength:{value:5,message:"Password is too short"}},render:e=>{var s;let{field:a}=e;return(0,r.jsx)(w.Z,{label:"New Password",error:null===(s=u.new_password)||void 0===s?void 0:s.message,type:w.n.password,...a})}})}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(v.Qr,{name:"new_password_confirmation",control:i,rules:{required:{value:!0,message:"Please enter your password"},validate:e=>{if(m("new_password")!==e)return"Your passwords do no match"}},render:e=>{var s;let{field:a}=e;return(0,r.jsx)(w.Z,{label:"Re-enter Password",error:null===(s=u.new_password_confirmation)||void 0===s?void 0:s.message,type:w.n.password,...a})}})}),(0,r.jsx)("div",{className:"mt-12",children:(0,r.jsx)(j.Z,{title:a?(0,r.jsx)(f.Gh,{size:13,color:"white"}):"Change Password",disabled:!h})})]})})};let y=()=>{let e=(0,l.CG)(e=>e.user.user),s=(0,l.TL)(),{Modal:a,setShowModal:c}=(0,n.Z)(),{Modal:v,setShowModal:w}=(0,n.Z)(),[f,g]=(0,t.useState)(),[y,_]=(0,t.useState)(!1),[C]=(0,d.ho)(),P=async e=>{_(!0),e.preventDefault();let a=URL.createObjectURL(e.target.files[0]);g(a);let r=new FormData;r.append("avatar",e.target.files[0]),await C(r).then(e=>{e.data.success&&(s((0,i.JR)({...l.h.getState().user.user,avatar:e.data.data.avatar})),o.Am.success(e.data.message),_(!1)),e.isError&&(o.Am.error(e.data.msg),_(!1))}).catch(e=>{o.Am.error("Ecountered error"),_(!1)})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"lg:w-9/12 xl:w-8/10 rounded-lg dash-shade p-6 mx-auto",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"fw-600 text-xl border-b",children:[e.user_type," Settings"]})}),(0,r.jsxs)("div",{className:"mt-6 grid lg:grid-cols-4 gap-x-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"relative z-0 w-[160px] h-[160px]",children:[e.avatar&&(0,r.jsx)(m(),{src:f||e.avatar,alt:"profile",width:160,height:160,className:"circle border w-full h-full mx-auto"}),!e.avatar&&!f&&(0,r.jsx)(x.Z,{fname:e.firstname,lname:e.lastname,size:160,text:"65px"}),(0,r.jsxs)("p",{className:"w-8 h-8 circle grid place-content-center bg-white absolute overflow-hidden z-10 bottom-[1px] right-[15px] border cursor-pointer",children:[y?"":(0,r.jsx)(u.YeY,{className:"text-primary relative"}),(0,r.jsx)("input",{type:"file",onChange:e=>P(e),className:"w-full h-full absolute z-10 opacity-0 cursor-pointer"})]})]}),(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("p",{className:"fw-600 mt-4 text-center text-primary",children:"Pikaboo"}),(0,r.jsx)("p",{className:"fw-600 mt-1 text-center",children:"".concat(e.firstname," ").concat(e.lastname)})]})]}),(0,r.jsx)("div",{className:"col-span-3 mt-9 pl-6",children:(0,r.jsxs)("div",{className:"grid gap-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)("div",{className:"w-16 h-16 grid place-content-center shadow-lg",children:(0,r.jsx)(h.KE5,{className:"text-2xl text-gray-400"})}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("p",{className:"fs-400 text-primary",children:"First Name:"}),(0,r.jsx)("p",{className:"border-b mt-3 fw-500",children:e.firstname})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)("div",{className:"w-16 h-16 grid place-content-center shadow-lg",children:(0,r.jsx)(h.KE5,{className:"text-2xl text-gray-400"})}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("p",{className:"fs-400 text-primary",children:"Last Name:"}),(0,r.jsx)("p",{className:"border-b mt-3 fw-500",children:e.lastname})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)("div",{className:"w-16 h-16 grid place-content-center shadow-lg",children:(0,r.jsx)(p.nI0,{className:"text-2xl text-gray-400"})}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("p",{className:"fs-400 text-primary",children:"Email:"}),(0,r.jsx)("p",{className:"border-b mt-3 fw-500",children:e.email})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)("div",{className:"w-16 h-16 grid place-content-center shadow-lg",children:(0,r.jsx)(u.Wsq,{className:"text-2xl text-gray-400"})}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("p",{className:"fs-400 text-primary",children:"Phone:"}),(0,r.jsx)("p",{className:"border-b mt-3 fw-500",children:e.phone})]})]})]})})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-x-6 mt-12",children:[(0,r.jsx)(j.Z,{title:"Edit Profile",onClick:()=>c(!0),altClassName:"px-6 py-2 border border-green-600 text-primary fw-500 rounded-lg"}),(0,r.jsx)(j.Z,{title:"Change Password",onClick:()=>w(!0),altClassName:"px-6 py-2 border border-green-600 bg-primary text-white fw-500 rounded-lg"})]})]})}),(0,r.jsx)(a,{title:"Update Profile",children:(0,r.jsx)(N,{close:()=>c(!1)})}),(0,r.jsx)(v,{title:"Change Password",children:(0,r.jsx)(b,{close:()=>w(!1)})})]})};var _=y;y.Layout="Dashboard"},88843:function(e,s,a){"use strict";a.d(s,{n:function(){return t}});var r,t,l=a(85893),n=a(67294),d=a(89583),i=a(77656);(r=t||(t={})).email="email",r.password="password",r.radio="radio",r.tel="tel",r.text="text",r.textarea="textarea",r.number="number",r.checkbox="checkbox",r.search="search",s.Z=e=>{let{type:s,name:a,onChange:r,label:o,error:c,required:m=!1,className:x="w-full border-0  outline-none py-2 px-2 rounded",labelClassName:u,placeholder:h,disabled:p=!1,maxLength:j,autoFocus:v,fullWidth:w,inputRef:f,onKeyPress:g,onBlur:N,autoComplete:b,autoCapitalize:y,onFocus:_,onKeyUp:C,onKeyDown:P,min:S,max:Z,customRightElement:k,altClassName:E,icon:q,readonly:A,...F}=e,[L,z]=(0,n.useState)(!1),[K,O]=(0,n.useState)(s),Q=e=>{z(e),O(e?t.text:t.password)};return(0,l.jsxs)("div",{className:"mt-3",children:[(0,l.jsx)("div",{children:(0,l.jsx)(l.Fragment,{children:o&&(0,l.jsx)("label",{className:u||"",children:o})})}),(0,l.jsxs)("div",{className:(0,i.AK)(s===t.checkbox?"":c?"border-red-400 border":"border border-gray-400","flex items-center bg-input  mt-1 rounded"),children:[q&&q,(()=>{switch(s){case t.textarea:return(0,l.jsx)("textarea",{id:a,className:E||(0,i.AK)(w?"w-full p-2":"p-2 h-24",x),name:a,required:m,onChange:r,placeholder:h,disabled:p,maxLength:j,autoFocus:v,onFocus:_,autoComplete:b,autoCapitalize:y,ref:f,...F});case t.checkbox:return(0,l.jsx)("input",{type:"checkbox",className:E||(0,i.AK)(w?"":"p-2",x),name:a,required:m,onChange:r,placeholder:h,disabled:p,maxLength:j,autoFocus:v,onFocus:_,autoComplete:b,autoCapitalize:y,ref:f,...F});default:return(0,l.jsx)("input",{id:a,type:K,className:E||(0,i.AK)(w?"w-full":"",x),name:a,required:m,onChange:r,placeholder:h,disabled:p,maxLength:j,autoFocus:v,onFocus:_,autoComplete:b,autoCapitalize:y,onKeyDown:P,onKeyUp:C,ref:f,min:S,max:Z,...F})}})(),k&&k,s===t.password&&(0,l.jsx)("div",{onClick:()=>Q(!L),className:"px-3",children:L?(0,l.jsx)(d.z5B,{className:"text-xl"}):(0,l.jsx)(d.tjB,{className:"text-xl"})})]}),(0,l.jsx)(l.Fragment,{children:c&&(0,l.jsx)("span",{className:"fs-500 fw-500 text-red-500",children:c.toString()})})]})}}},function(e){e.O(0,[536,199,774,888,179],function(){return e(e.s=73406)}),_N_E=e.O()}]);