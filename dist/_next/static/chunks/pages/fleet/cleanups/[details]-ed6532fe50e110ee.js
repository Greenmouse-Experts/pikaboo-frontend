(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[694],{92367:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fleet/cleanups/[details]",function(){return a(87470)}])},87470:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return f}});var l=a(85893),n=a(67294),i=a(11163),r=a(35636),c=a(37106),t=a(27484),d=a.n(t),o=a(71119),m=a(77656),x=e=>{let{data:s,refetch:a}=e,i=(0,n.useMemo)(()=>[{Header:"S/N",accessor:(e,s)=>s+1},{Header:"Name",accessor:"residence.home_residence.first_name",Cell:e=>" ".concat(e.value," ").concat(e.row.original.residence.home_residence.last_name)},{Header:"Email",accessor:"residence.home_residence.email"},{Header:"Phone",accessor:"residence.home_residence.phone"},{Header:"Address",accessor:"residence.house_number",Cell:e=>(0,l.jsx)("p",{children:"".concat(e.value," ").concat(e.row.original.residence.street_name," ").concat(e.row.original.residence.town)})},{Header:"Facility Type",accessor:"residence.facility_type"},{Header:"Status",accessor:"status",Cell:e=>m.LR[e.value]}],[]),r=(0,n.useMemo)(()=>s,[s]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"lg:p-4 lg:pt-10 dash-shade",children:(0,l.jsx)(o.ZP,{columns:i,data:r})})})},h=a(1988),p=a(79794),u=e=>{let{data:s}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"dash-shade py-2 pb-6",children:[(0,l.jsx)("div",{className:"grid lg:grid-cols-2 gap-6 mt-12 px-6",children:s&&!!s.length&&s.map((e,s)=>(0,l.jsx)("div",{className:"shades py-6 p-4",children:(0,l.jsxs)("div",{className:"flex gap-x-4",children:[(0,l.jsx)(h.Z,{fname:e.service_personnel.first_name,lname:e.service_personnel.last_name,size:70,text:"23px"}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"fw-600 text-xl",children:[e.service_personnel.first_name," ",e.service_personnel.last_name]}),(0,l.jsx)("p",{className:"",children:e.service_personnel.email}),(0,l.jsx)("p",{className:"",children:e.service_personnel.phone}),(0,l.jsx)("p",{className:"fw-600 text-primary",children:e.service_personnel.pikaboo_id})]})]})},s))}),s&&!(null==s?void 0:s.length)&&(0,l.jsx)("div",{className:"mt-6",children:(0,l.jsx)(p.Z,{message:"No assigned personnel yet",imageClass:"lg:w-36 mx-auto"})})]})})},v=a(14057),j=a(79008),g=a(22920),N=e=>{var s,a,i,c;let{id:t,refetchId:d}=e,{data:o,isLoading:m,refetch:x}=(0,r.n1)(t),[u,N]=(0,n.useState)(!1),[_]=(0,r.mZ)(),[f,w]=(0,n.useState)([]),y=e=>{if(e.target.checked){let s=e.target.value;w(e=>[...e,s])}else f.splice(f.indexOf(e.target.value),1)},b=async()=>{N(!0);let e=new FormData;e.append("cleanup_request_id",String(t));for(let s=0;s<f.length;s++)e.append("crsp_id[]",f[s]);await _(e).then(e=>{e.isSuccess?(g.Am.success(e.data.message),N(!1),x(),d()):(g.Am.error(e.error.data.message),N(!1))}).catch(e=>{}),N(!1)};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"dash-shade py-4 lg:py-12 p-6",children:[(0,l.jsxs)("div",{children:[m&&(0,l.jsx)("div",{className:"flex justify-center my-12",children:(0,l.jsx)(j.B0,{size:"70"})}),(0,l.jsx)("div",{className:"grid lg:grid-cols-2 gap-6",children:o&&!!(null==o?void 0:null===(s=o.data)||void 0===s?void 0:s.length)&&(null==o?void 0:null===(a=o.data)||void 0===a?void 0:a.map((e,s)=>(0,l.jsxs)("div",{className:"dash-shade relative p-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,l.jsx)("div",{className:"w-[70px]",children:(0,l.jsx)(h.Z,{fname:e.service_personnel.first_name,lname:e.service_personnel.last_name,size:70,text:"23px"})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"fw-600 text-xl",children:[e.service_personnel.first_name," ",e.service_personnel.last_name]}),(0,l.jsx)("p",{className:"",children:e.service_personnel.phone})]})]}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"checkbox",value:e.id,className:"w-6 h-6 absolute top-5 right-3",onChange:y})})]},s)))}),o&&!!(null==o?void 0:null===(i=o.data)||void 0===i?void 0:i.length)&&(0,l.jsx)("div",{className:"lg:w-7/12 mx-auto mt-12",children:(0,l.jsx)(v.Z,{title:u?(0,l.jsx)(j.Gh,{size:13,color:"white"}):"Submit Personnels",disabled:!f.length,onClick:b})})]}),o&&!(null===(c=o.data)||void 0===c?void 0:c.length)&&(0,l.jsx)("div",{className:"mt-6",children:(0,l.jsx)(p.Z,{message:"No personnel request yet",imageClass:"lg:w-36 mx-auto"})})]})})};let _=()=>{let e=(0,i.useRouter)(),s=e.query.id,[a,t]=(0,n.useState)(1),[o,m]=(0,n.useState)(),[h]=(0,r.D3)();(0,n.useEffect)(()=>{h(s).then(e=>{e.isSuccess&&m(e.data.data)}).catch(e=>{})},[s]);let p=e=>{t(e)},v={borderBottom:"6px solid black",color:"black",fontWeight:"600"};return(0,l.jsxs)(l.Fragment,{children:[!o&&(0,l.jsx)("div",{className:"flex justify-center my-12 lg:mt-24",children:(0,l.jsx)(j.B0,{size:"140"})}),o&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"p-5 ",children:[(0,l.jsx)(c.owl,{onClick:()=>e.back()}),(0,l.jsx)("p",{className:"fw-600 text-2xl",children:o.zone.name}),(0,l.jsx)("p",{className:"fw-500",children:d()(o.created_at).format("DD/MMMM/YYYY")})]}),(0,l.jsxs)("div",{className:"mt-5 px-4",children:[(0,l.jsx)("div",{className:"border-b",children:(0,l.jsxs)("ul",{className:"flex items-center gap-x-6 text-gray-500",children:[(0,l.jsx)("li",{className:"cursor-pointer p-2  px-4",style:1===a?v:void 0,onClick:()=>p(1),children:(0,l.jsx)("div",{className:"flex items-center gap-x-2",children:(0,l.jsx)("p",{className:"fw-500",children:"Residence List"})})}),(0,l.jsx)("li",{className:"cursor-pointer  p-2  px-4",style:2===a?v:void 0,onClick:()=>p(2),children:(0,l.jsx)("div",{className:"flex items-center gap-x-2",children:(0,l.jsx)("p",{className:"fw-500",children:"Assigned Personnel"})})}),(0,l.jsx)("li",{className:"cursor-pointer  p-2  px-4",style:3===a?v:void 0,onClick:()=>p(3),children:(0,l.jsx)("div",{className:"flex items-center gap-x-2",children:(0,l.jsx)("p",{className:"fw-500",children:"Personnel Requests"})})})]})}),(0,l.jsxs)("div",{className:"",children:[1===a?(0,l.jsx)(x,{data:o.home_residence,refetch:()=>h(s)}):"",2===a?(0,l.jsx)(u,{data:o.service_personnels}):"",3===a?(0,l.jsx)(N,{id:o.id,refetchId:()=>h(s)}):""]})]})]})]})};var f=_;_.Layout="Dashboard"},79794:function(e,s,a){"use strict";var l=a(85893);a(67294);var n=a(25675),i=a.n(n);s.Z=e=>{let{message:s,imageClass:a}=e;return(0,l.jsx)("div",{className:"w-full grid place-content-center",children:(0,l.jsxs)("div",{children:[(0,l.jsx)(i(),{src:"https://res.cloudinary.com/greenmouse-tech/image/upload/v1689941389/pikaboo/garbage_empty-removebg-preview_o7ps5z.png",alt:"empty",width:400,height:400,className:a}),(0,l.jsx)("p",{className:"text-center mt-4 text-gray-500",children:s||"No Data Available"})]})})}}},function(e){e.O(0,[907,865,485,774,888,179],function(){return e(e.s=92367)}),_N_E=e.O()}]);