(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[577],{29217:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/settings",function(){return s(48161)}])},48161:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return _}});var r=s(85893),t=s(67294),l=s(25675),n=s.n(l),d=s(14057),i=s(13619),o=s(1988),c=s(63750),m=s(89583),x=s(5434),u=s(12633),h=s(22920),p=s(70545),j=s(37294),w=s(87536),g=s(88843),v=s(79008),f=s(78524);s(45516);var N=e=>{let{close:a}=e,s=(0,i.CG)(e=>e.user.user),[l,n]=(0,t.useState)(!1),[o]=(0,u.LI)(),c=(0,i.TL)(),{control:m,handleSubmit:x,setError:j,formState:{errors:N,isValid:b}}=(0,w.cI)({mode:"onChange",defaultValues:{first_name:s.firstname,last_name:s.lastname,email:s.email,phone:s.phone||""}}),y=async e=>{n(!0),await o(e).then(e=>{e.data.success?(c((0,p.JR)({...i.h.getState().user.user,firstname:e.data.data.first_name,lastname:e.data.data.last_name,email:e.data.data.email,phone:e.data.data.phone})),h.Am.success(e.data.message),a()):(h.Am.error(e.data.message),n(!1))}).catch(e=>{var a;h.Am.error(null==e?void 0:null===(a=e.error)||void 0===a?void 0:a.data.message),n(!1)})};return(0,r.jsx)("div",{children:(0,r.jsxs)("form",{className:"fs-600",onSubmit:x(y),children:[(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-4",children:[(0,r.jsx)(w.Qr,{name:"first_name",control:m,rules:{required:{value:!0,message:"Please enter your first name"}},render:e=>{var a;let{field:s}=e;return(0,r.jsx)(g.Z,{label:"First Name",error:null===(a=N.first_name)||void 0===a?void 0:a.message,type:g.n.text,...s})}}),(0,r.jsx)(w.Qr,{name:"last_name",control:m,rules:{required:{value:!0,message:"Please enter your last name"}},render:e=>{var a;let{field:s}=e;return(0,r.jsx)(g.Z,{label:"Last Name",error:null===(a=N.last_name)||void 0===a?void 0:a.message,type:g.n.text,...s})}}),(0,r.jsx)(w.Qr,{name:"email",control:m,rules:{required:{value:!0,message:"Please enter your email"}},render:e=>{var a;let{field:s}=e;return(0,r.jsx)(g.Z,{label:"Email",error:null===(a=N.email)||void 0===a?void 0:a.message,type:g.n.email,...s})}}),(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("label",{className:"mb-2 mt-2 block text-gray-500",children:"Phone Number"}),(0,r.jsx)(f.Z,{international:!0,defaultCountry:"NG",name:"phone",control:m,rules:{required:!0},className:"border lg:p-2 p-2 border-gray-400 rounded outline-none"}),N.phone&&(0,r.jsx)("p",{className:"error text-red-500 fw-500",children:"Invalid Phone Number"})]})]}),(0,r.jsx)("div",{className:"mt-10",children:(0,r.jsx)(d.Z,{title:l?(0,r.jsx)(v.Gh,{size:13,color:"white"}):"Update Profile",disabled:!b})})]})})},b=e=>{let{close:a}=e,[s,l]=(0,t.useState)(!1),[n]=(0,u.sA)(),{control:i,handleSubmit:o,watch:c,setError:m,formState:{errors:x,isValid:p}}=(0,w.cI)({mode:"onChange",defaultValues:{old_password:"",new_password:"",new_password_confirmation:""}}),j=async e=>{l(!0),await n(e).then(e=>{e.data.success?(h.Am.success(e.data.message),a()):(h.Am.error(e.data.message),l(!1))}).catch(e=>{var a;h.Am.error(null==e?void 0:null===(a=e.error)||void 0===a?void 0:a.data.message),l(!1)})};return(0,r.jsx)("div",{children:(0,r.jsxs)("form",{className:"fs-600",onSubmit:o(j),children:[(0,r.jsx)("div",{children:(0,r.jsx)(w.Qr,{name:"old_password",control:i,rules:{required:{value:!0,message:"Password is required"}},render:e=>{var a;let{field:s}=e;return(0,r.jsx)(g.Z,{label:"Old Password",error:null===(a=x.old_password)||void 0===a?void 0:a.message,type:g.n.password,...s})}})}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(w.Qr,{name:"new_password",control:i,rules:{required:{value:!0,message:"Password is required"},minLength:{value:5,message:"Password is too short"}},render:e=>{var a;let{field:s}=e;return(0,r.jsx)(g.Z,{label:"New Password",error:null===(a=x.new_password)||void 0===a?void 0:a.message,type:g.n.password,...s})}})}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(w.Qr,{name:"new_password_confirmation",control:i,rules:{required:{value:!0,message:"Please enter your password"},validate:e=>{if(c("new_password")!=e)return"Your passwords do no match"}},render:e=>{var a;let{field:s}=e;return(0,r.jsx)(g.Z,{label:"Re-enter Password",error:null===(a=x.new_password_confirmation)||void 0===a?void 0:a.message,type:g.n.password,...s})}})}),(0,r.jsx)("div",{className:"mt-12",children:(0,r.jsx)(d.Z,{title:s?(0,r.jsx)(v.Gh,{size:13,color:"white"}):"Change Password",disabled:!p})})]})})};let y=()=>{let e=(0,i.CG)(e=>e.user.user),a=(0,i.TL)(),{Modal:s,setShowModal:l}=(0,j.Z)(),{Modal:w,setShowModal:g}=(0,j.Z)(),[v,f]=(0,t.useState)(),[y,_]=(0,t.useState)(!1),[C]=(0,u.xo)(),P=async e=>{_(!0),e.preventDefault();let s=URL.createObjectURL(e.target.files[0]);f(s);let r=new FormData;r.append("avatar",e.target.files[0]),await C(r).then(e=>{e.data.success&&(a((0,p.JR)({...i.h.getState().user.user,avatar:e.data.data.avatar})),h.Am.success(e.data.message),_(!1)),e.isError&&(h.Am.error(e.data.msg),_(!1))}).catch(e=>{h.Am.error("Ecountered error"),_(!1)})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"lg:w-9/12 xl:w-8/10 rounded-lg dash-shade p-6 mx-auto",children:[(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"fw-600 text-xl border-b",children:"Super Admin Settings"})}),(0,r.jsxs)("div",{className:"mt-6 grid lg:grid-cols-4 gap-x-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"relative z-0 w-[160px] h-[160px]",children:[e.avatar&&(0,r.jsx)(n(),{src:v||e.avatar,alt:"profile",width:160,height:160,className:"circle border w-full h-full mx-auto"}),!e.avatar&&!v&&(0,r.jsx)(o.Z,{fname:e.firstname,lname:e.lastname,size:160,text:"65px"}),(0,r.jsxs)("p",{className:"w-8 h-8 circle grid place-content-center bg-white absolute overflow-hidden z-10 bottom-[1px] right-[15px] border cursor-pointer",children:[y?"":(0,r.jsx)(c.YeY,{className:"text-primary relative"}),(0,r.jsx)("input",{type:"file",onChange:e=>P(e),className:"w-full h-full absolute z-10 opacity-0 cursor-pointer"})]})]}),(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("p",{className:"fw-600 mt-4 text-center text-primary",children:"Pikaboo"}),(0,r.jsx)("p",{className:"fw-600 mt-1 text-center",children:"".concat(e.firstname," ").concat(e.lastname)})]})]}),(0,r.jsx)("div",{className:"col-span-3 mt-9 pl-6",children:(0,r.jsxs)("div",{className:"grid gap-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)("div",{className:"w-16 h-16 grid place-content-center shadow-lg",children:(0,r.jsx)(m.KE5,{className:"text-2xl text-gray-400"})}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("p",{className:"fs-400 text-primary",children:"First Name:"}),(0,r.jsx)("p",{className:"border-b mt-3 fw-500",children:e.firstname})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)("div",{className:"w-16 h-16 grid place-content-center shadow-lg",children:(0,r.jsx)(m.KE5,{className:"text-2xl text-gray-400"})}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("p",{className:"fs-400 text-primary",children:"Last Name:"}),(0,r.jsx)("p",{className:"border-b mt-3 fw-500",children:e.lastname})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)("div",{className:"w-16 h-16 grid place-content-center shadow-lg",children:(0,r.jsx)(x.nI0,{className:"text-2xl text-gray-400"})}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("p",{className:"fs-400 text-primary",children:"Email:"}),(0,r.jsx)("p",{className:"border-b mt-3 fw-500",children:e.email})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)("div",{className:"w-16 h-16 grid place-content-center shadow-lg",children:(0,r.jsx)(c.Wsq,{className:"text-2xl text-gray-400"})}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("p",{className:"fs-400 text-primary",children:"Phone:"}),(0,r.jsx)("p",{className:"border-b mt-3 fw-500",children:e.phone})]})]})]})})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-x-6 mt-12",children:[(0,r.jsx)(d.Z,{title:"Edit Profile",onClick:()=>l(!0),altClassName:"px-6 py-2 border border-green-600 text-primary fw-500 rounded-lg"}),(0,r.jsx)(d.Z,{title:"Change Password",onClick:()=>g(!0),altClassName:"px-6 py-2 border border-green-600 bg-primary text-white fw-500 rounded-lg"})]})]})}),(0,r.jsx)(s,{title:"Update Profile",children:(0,r.jsx)(N,{close:()=>l(!1)})}),(0,r.jsx)(w,{title:"Change Password",children:(0,r.jsx)(b,{close:()=>g(!1)})})]})};var _=y;y.Layout="Dashboard"},88843:function(e,a,s){"use strict";s.d(a,{n:function(){return t}});var r,t,l=s(85893),n=s(67294),d=s(89583),i=s(77656);(r=t||(t={})).email="email",r.password="password",r.radio="radio",r.tel="tel",r.text="text",r.textarea="textarea",r.number="number",r.checkbox="checkbox",r.search="search",a.Z=e=>{let{type:a,name:s,onChange:r,label:o,error:c,required:m=!1,className:x="w-full border-0  outline-none py-2 px-2 rounded",labelClassName:u,placeholder:h,disabled:p=!1,maxLength:j,autoFocus:w,fullWidth:g,inputRef:v,onKeyPress:f,onBlur:N,autoComplete:b,autoCapitalize:y,onFocus:_,onKeyUp:C,onKeyDown:P,min:S,max:A,customRightElement:Z,altClassName:k,icon:q,readonly:E,...F}=e,[L,z]=(0,n.useState)(!1),[K,Q]=(0,n.useState)(a),G=e=>{z(e),Q(e?t.text:t.password)};return(0,l.jsxs)("div",{className:"mt-3",children:[(0,l.jsx)("div",{children:(0,l.jsx)(l.Fragment,{children:o&&(0,l.jsx)("label",{className:u||"",children:o})})}),(0,l.jsxs)("div",{className:(0,i.AK)(a===t.checkbox?"":c?"border-red-400 border":"border border-gray-400","flex items-center bg-input  mt-1 rounded"),children:[q&&q,(()=>{switch(a){case t.textarea:return(0,l.jsx)("textarea",{id:s,className:k||(0,i.AK)(g?"w-full p-2":"p-2 h-24",x),name:s,required:m,onChange:r,placeholder:h,disabled:p,maxLength:j,autoFocus:w,onFocus:_,autoComplete:b,autoCapitalize:y,ref:v,...F});case t.checkbox:return(0,l.jsx)("input",{type:"checkbox",className:k||(0,i.AK)(g?"":"p-2",x),name:s,required:m,onChange:r,placeholder:h,disabled:p,maxLength:j,autoFocus:w,onFocus:_,autoComplete:b,autoCapitalize:y,ref:v,...F});default:return(0,l.jsx)("input",{id:s,type:K,className:k||(0,i.AK)(g?"w-full":"",x),name:s,required:m,onChange:r,placeholder:h,disabled:p,maxLength:j,autoFocus:w,onFocus:_,autoComplete:b,autoCapitalize:y,onKeyDown:P,onKeyUp:C,ref:v,min:S,max:A,...F})}})(),Z&&Z,a===t.password&&(0,l.jsx)("div",{onClick:()=>G(!L),className:"px-3",children:L?(0,l.jsx)(d.z5B,{className:"text-xl"}):(0,l.jsx)(d.tjB,{className:"text-xl"})})]}),(0,l.jsx)(l.Fragment,{children:c&&(0,l.jsx)("span",{className:"fs-500 fw-500 text-red-500",children:c.toString()})})]})}}},function(e){e.O(0,[536,199,774,888,179],function(){return e(e.s=29217)}),_N_E=e.O()}]);