(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[779],{80016:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/residents/[details]",function(){return l(86880)}])},86880:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return Z}});var i=l(85893),a=l(67294),r=l(37106),d=l(25675),n=l.n(d),t=l(14057),c=l(41664),o=l.n(c),x=l(29562),m=l(11163),h=l(77656),u=l(27484),p=l.n(u),j=l(89583),b=l(1653),v=l(37294),f=l(94937),g=l(22103),N=l(25411);let w=f.g.injectEndpoints({endpoints:e=>({flagResidence:e.query({query:e=>({url:"".concat(g.ay,"?user_id=").concat(e),method:g.WU.POST,headers:{Authorization:(0,N.qL)()}}),keepUnusedDataFor:g.Wm.DEFAULT}),updateBill:e.query({query:e=>({url:"".concat(g.ON),method:g.WU.POST,headers:{Authorization:(0,N.qL)()},body:e}),keepUnusedDataFor:g.Wm.DEFAULT})}),overrideExisting:!0}),{useLazyFlagResidenceQuery:y,useLazyUpdateBillQuery:_}=w;var C=l(22920),k=l(79008),A=e=>{let{title:s,closeModal:l,action:a,cancelTitle:r,actionTitle:d,isBusy:n}=e;return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"px-6",children:s}),(0,i.jsxs)("div",{className:"w-full mt-8 flex justify-between",children:[(0,i.jsx)(t.Z,{altClassName:"py-2 px-3 lg:px-6 rounded  bg-red-600 text-white",title:r,onClick:l}),(0,i.jsx)(t.Z,{altClassName:"py-2 px-3 lg:px-6 rounded bg-primary text-white",title:n?(0,i.jsx)(k.ZW,{size:4,color:"white"}):d,onClick:a})]})]})},F=l(87536),S=l(88843),M=e=>{let{bill:s,bin:l,id:r,close:d,refetch:n}=e,[c,o]=(0,a.useState)(!1),[x]=_(),{control:m,handleSubmit:h,setError:u,formState:{errors:p,isValid:j}}=(0,F.cI)({mode:"onChange",defaultValues:{bill:s,bill_monthly:"",waste_bin_monthly:l,user_id:r}}),b=async e=>{o(!0),await x(e).then(e=>{if(e.data.success)C.Am.success(e.data.message),n(),d();else{var s;Object.entries(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.errors).forEach(e=>{let[s,l]=e;C.Am.error(l[0])}),o(!1)}}).catch(e=>{var s;C.Am.error(null==e?void 0:null===(s=e.error)||void 0===s?void 0:s.data.message),o(!1)})};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{children:(0,i.jsxs)("form",{onSubmit:h(b),children:[(0,i.jsx)("div",{children:(0,i.jsx)(F.Qr,{name:"bill",control:m,rules:{required:{value:!0,message:"Please enter a value"}},render:e=>{var s;let{field:l}=e;return(0,i.jsx)(S.Z,{label:"Initial Bill",error:null===(s=p.bill)||void 0===s?void 0:s.message,type:S.n.text,...l,disabled:!0})}})}),(0,i.jsx)("div",{children:(0,i.jsx)(F.Qr,{name:"bill_monthly",control:m,rules:{required:{value:!0,message:"Please enter new bill"}},render:e=>{var s;let{field:l}=e;return(0,i.jsx)(S.Z,{label:"New Bill",error:null===(s=p.bill_monthly)||void 0===s?void 0:s.message,type:S.n.number,...l})}})}),(0,i.jsx)("div",{children:(0,i.jsx)(F.Qr,{name:"waste_bin_monthly",control:m,rules:{required:{value:!0,message:"Please enter new bin amount"}},render:e=>{var s;let{field:l}=e;return(0,i.jsx)(S.Z,{label:"Waste Bin Monthly Fee",error:null===(s=p.waste_bin_monthly)||void 0===s?void 0:s.message,type:S.n.number,...l})}})}),(0,i.jsx)("div",{className:"mt-6",children:(0,i.jsx)(t.Z,{title:c?(0,i.jsx)(k.Gh,{size:13,color:"white"}):"Update Billing",disabled:!j})})]})})})};let B=()=>{var e,s,l,d,c,u,f,g,N,w;let _=(0,m.useRouter)(),F=_.query.sort,[S,B]=(0,a.useState)(!1),[Z,q]=(0,a.useState)(),[P]=(0,x.Ju)(),E=null==Z?void 0:null===(e=Z.building_information)||void 0===e?void 0:null===(s=e.facility_type)||void 0===s?void 0:s.split(","),T=null==Z?void 0:null===(l=Z.building_information)||void 0===l?void 0:null===(d=l.flats)||void 0===d?void 0:d.split(","),U=null==Z?void 0:null===(c=Z.building_information)||void 0===c?void 0:null===(u=c.shop_store_in)||void 0===u?void 0:u.split(","),z=async e=>{B(!0),await P(e).then(e=>{var s;(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.success)&&q(e.data.data),B(!1)})};(0,a.useEffect)(()=>{F&&z(F)},[F]);let{Modal:D,setShowModal:L}=(0,v.Z)(),[O,Q]=(0,a.useState)(!1),{Modal:W,setShowModal:R}=(0,v.Z)(),{Modal:K,setShowModal:Y}=(0,v.Z)(),[I]=y(),H=async e=>{Q(!0),await I(e).then(s=>{var l;s.data.success&&(C.Am.success(s.data.message),z(e),R(!1),Y(!1),Q(!1)),Object.entries(null==s?void 0:null===(l=s.data)||void 0===l?void 0:l.errors).forEach(e=>{let[s,l]=e;C.Am.error(l[0])})}).catch(()=>{})},{Modal:X,setShowModal:G}=(0,v.Z)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"mb-2",children:(0,i.jsxs)(o(),{href:"/admin/residents/",className:"flex items-center gap-x-1 fw-500 text-gray-500",children:[(0,i.jsx)(r.owl,{}),"Back"]})}),S&&(0,i.jsx)("div",{className:"flex justify-center my-12 lg:mt-24",children:(0,i.jsx)(k.B0,{size:"140"})}),Z&&(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"grid lg:grid-cols-2 lg:gap-12",children:[(0,i.jsxs)("div",{className:"row-span-2 dash-shade p-8 rounded-xl",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"w-7/12 mx-auto dash-shade",children:(0,i.jsx)(b.Z,{size:156,style:{height:"auto",maxWidth:"100%",width:"100%"},value:Z.pikaboo_id})}),(0,i.jsx)("p",{className:"text-center mt-5 fw-600 text-primary",children:Z.pikaboo_id})]}),(0,i.jsxs)("div",{className:"flex gap-x-12 mt-12",children:[(0,i.jsx)("p",{className:"w-4/12 fw-600",children:"Resident Profile"}),(0,i.jsxs)("div",{className:"w-8/12",children:[(0,i.jsx)("p",{className:"fw-500",children:"".concat(Z.title," ").concat(Z.first_name," ").concat(Z.middle_name?Z.middle_name:""," ").concat(Z.last_name)}),(0,i.jsx)("p",{children:null==Z?void 0:Z.address})]})]}),(0,i.jsxs)("div",{className:"mt-6",children:[(0,i.jsxs)("div",{className:"border-b flex pb-2 ",children:[(0,i.jsx)("p",{className:"w-4/12 fw-500",children:"Phone"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:Z.phone}),(0,i.jsx)("p",{children:Z.phone2})]})]}),(0,i.jsxs)("div",{className:"border-b flex py-2 mt-2",children:[(0,i.jsx)("p",{className:"w-4/12 fw-500",children:"Email"}),(0,i.jsx)("div",{children:(0,i.jsx)("p",{children:Z.email})})]}),(0,i.jsxs)("div",{className:"border-b flex py-2 mt-2",children:[(0,i.jsx)("p",{className:"w-4/12 fw-500",children:"Building Purpose"}),(0,i.jsx)("div",{children:(0,i.jsx)("p",{children:Z.building_information.purpose_built_facility})})]}),(0,i.jsxs)("div",{className:"border-b flex py-2 mt-2",children:[(0,i.jsx)("p",{className:"w-4/12 fw-500",children:"Facility Type"}),(0,i.jsxs)("div",{children:[!E&&(0,i.jsx)("p",{children:"None"}),(0,i.jsx)("p",{children:E&&E.map((e,s)=>(0,i.jsx)("p",{children:e},s))})]})]}),(0,i.jsxs)("div",{className:"border-b flex py-2 mt-2",children:[(0,i.jsx)("p",{className:"w-4/12 fw-500",children:"Flats"}),(0,i.jsxs)("div",{children:[!T&&(0,i.jsx)("p",{children:"None"}),(0,i.jsx)("p",{children:T&&T.map((e,s)=>(0,i.jsx)("p",{children:e},s))})]})]}),(0,i.jsxs)("div",{className:"border-b flex py-2 mt-2",children:[(0,i.jsx)("p",{className:"w-4/12 fw-500",children:"Shops"}),(0,i.jsxs)("div",{children:[!U&&(0,i.jsx)("p",{children:"None"}),(0,i.jsx)("p",{children:U&&U.map((e,s)=>(0,i.jsx)("p",{children:e},s))})]})]}),(0,i.jsxs)("div",{className:"mt-8 flex justify-center",children:["Flag"===Z.status&&(0,i.jsx)(t.Z,{title:"Unflag Resident",altClassName:"lg:w-[200px] bg-primary text-white py-2 rounded-lg fw-500",onClick:()=>Y(!0)}),"Active"===Z.status&&(0,i.jsx)(t.Z,{title:"Flag Resident",altClassName:"lg:w-[200px] bg-red-500 text-white py-2 rounded-lg fw-500",onClick:()=>R(!0)})]})]})]}),(0,i.jsxs)("div",{className:"dash-shade relative p-8 rounded-xl",children:[(0,i.jsx)("div",{className:"absolute top-4 right-4",children:(0,i.jsx)(j.ffH,{className:"text-xl text-primary",onClick:()=>L(!0)})}),(0,i.jsxs)("div",{className:"grid lg:grid-cols-2",children:[(0,i.jsxs)("div",{className:"border-r p-4",children:[(0,i.jsx)("p",{className:"fw-600 border-b",children:"Wallet Amount"}),(0,i.jsx)("p",{className:"fw-600 text-3xl mt-2 text-green-600",children:(0,h.eQ)(Z.wallet)})]}),(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("p",{className:"fw-600 border-b",children:"Monthly Bill"}),(0,i.jsx)("p",{className:"fw-600 text-3xl mt-2",children:(0,h.eQ)(null==Z?void 0:null===(f=Z.bill)||void 0===f?void 0:f.bill_monthly)})]}),(0,i.jsxs)("div",{className:"border-r p-4",children:[(0,i.jsx)("p",{className:"fw-600 border-b",children:"Bin Amount Paid"}),(0,i.jsx)("p",{className:"fw-600 text-3xl mt-2 text-green-600",children:(0,h.eQ)(Z.bill.bin_amount_paid)})]}),(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("p",{className:"fw-600 border-b",children:"Monthly Bin"}),(0,i.jsx)("p",{className:"fw-600 text-3xl mt-2",children:(0,h.eQ)(null==Z?void 0:null===(g=Z.bill)||void 0===g?void 0:g.waste_bin_monthly)})]})]})]}),(0,i.jsxs)("div",{className:"dash-shade p-8 rounded-xl",children:[(0,i.jsx)("p",{className:"fw-600 lg:fs-700",children:"More Information"}),(0,i.jsxs)("div",{className:"mt-6",children:[(0,i.jsxs)("div",{className:"flex border-b pb-2 lg:pb-3",children:[(0,i.jsx)("p",{className:"w-4/12 fw-500",children:"Zone:"}),(0,i.jsx)("p",{children:"Ugbowo Central"})]}),(0,i.jsxs)("div",{className:"flex border-b pt-3 pb-2 lg:py-4",children:[(0,i.jsx)("p",{className:"w-4/12 fw-500",children:"Status:"}),(0,i.jsx)("div",{children:h.T$[Z.status]})]}),(0,i.jsxs)("div",{className:"flex border-b pt-3 pb-2 lg:py-4",children:[(0,i.jsx)("p",{className:"w-4/12 fw-500",children:"Property Image:"}),(0,i.jsx)("div",{className:"flex gap-x-4",children:Z.building_information.building_image&&(0,i.jsx)(n(),{src:Z.building_information.building_image,alt:"property",width:100,height:100,className:"w-24 rounded-lg shades",onClick:()=>G(!0)})})]}),(0,i.jsxs)("div",{className:"flex border-b pb-2 pt-3 lg:py-4",children:[(0,i.jsx)("p",{className:"w-4/12 fw-500",children:"Registered on:"}),(0,i.jsx)("p",{children:p()(Z.created_at).format("DD - MMM - YYYY")})]}),(0,i.jsxs)("div",{className:"border-b pb-2 pt-3 lg:py-4",children:[(0,i.jsx)("p",{className:"fw-600",children:"Precise Address"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 mt-3 gap-3",children:[(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("p",{className:"fw-500 text-gray-500 border-b",children:"Plot No"}),(0,i.jsx)("p",{children:Z.building_information.plot_no})]}),(0,i.jsxs)("div",{className:"border-l pl-2",children:[(0,i.jsx)("p",{className:"fw-500 text-gray-500 border-b",children:"House No"}),(0,i.jsx)("p",{children:Z.building_information.house_number})]}),(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("p",{className:"fw-500 text-gray-500 border-b",children:"Street Name"}),(0,i.jsx)("p",{children:Z.building_information.street_name})]}),(0,i.jsxs)("div",{className:"border-l pl-2",children:[(0,i.jsx)("p",{className:"fw-500 text-gray-500 border-b",children:"Area 1"}),(0,i.jsx)("p",{children:Z.building_information.area1})]}),(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("p",{className:"fw-500 text-gray-500 border-b",children:"Area 2"}),(0,i.jsx)("p",{children:Z.building_information.area2})]}),(0,i.jsxs)("div",{className:"border-l pl-2",children:[(0,i.jsx)("p",{className:"fw-500 text-gray-500 border-b",children:"Quarter"}),(0,i.jsx)("p",{children:Z.building_information.quarter})]}),(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("p",{className:"fw-500 text-gray-500 border-b",children:"Town"}),(0,i.jsx)("p",{children:Z.building_information.town})]}),(0,i.jsxs)("div",{className:"border-l pl-2",children:[(0,i.jsx)("p",{className:"fw-500 text-gray-500 border-b",children:"State"}),(0,i.jsx)("p",{children:Z.building_information.state})]})]})]})]})]})]})})]}),(0,i.jsx)(W,{title:"",noHead:!0,children:(0,i.jsx)(A,{title:"Are you sure you want to flag this residence",cancelTitle:"No, cancel",actionTitle:"Yes, Flag",closeModal:()=>R(!1),action:()=>H(null==Z?void 0:Z.id),isBusy:O})}),(0,i.jsx)(K,{title:"",noHead:!0,children:(0,i.jsx)(A,{title:"Are you sure you want to unflag this residence",cancelTitle:"No, cancel",actionTitle:"Yes, Unflag",closeModal:()=>Y(!1),action:()=>H(null==Z?void 0:Z.id),isBusy:O})}),(0,i.jsx)(D,{title:"Update Monthly Billing",children:(0,i.jsx)(M,{bill:null==Z?void 0:Z.bill.bill_monthly,bin:null==Z?void 0:Z.bill.waste_bin_monthly,id:null==Z?void 0:Z.id,close:()=>L(!1),refetch:()=>z(F)})}),(0,i.jsxs)(X,{title:"Residence Image",children:[(0,i.jsx)("a",{className:"block text-end mb-2",href:null==Z?void 0:null===(N=Z.building_information)||void 0===N?void 0:N.building_image,target:"_blank",rel:"noopener noreferrer",children:(0,i.jsx)(j.a1O,{className:"text-primary text-lg"})}),Z&&(0,i.jsx)(n(),{src:null==Z?void 0:null===(w=Z.building_information)||void 0===w?void 0:w.building_image,alt:"property",width:800,height:800})]})]})};var Z=B;B.Layout="Dashboard"},88843:function(e,s,l){"use strict";l.d(s,{n:function(){return a}});var i,a,r=l(85893),d=l(67294),n=l(89583),t=l(77656);(i=a||(a={})).email="email",i.password="password",i.radio="radio",i.tel="tel",i.text="text",i.textarea="textarea",i.number="number",i.checkbox="checkbox",i.search="search",s.Z=e=>{let{type:s,name:l,onChange:i,label:c,error:o,required:x=!1,className:m="w-full border-0  outline-none py-2 px-2 rounded",labelClassName:h,placeholder:u,disabled:p=!1,maxLength:j,autoFocus:b,fullWidth:v,inputRef:f,onKeyPress:g,onBlur:N,autoComplete:w,autoCapitalize:y,onFocus:_,onKeyUp:C,onKeyDown:k,min:A,max:F,customRightElement:S,altClassName:M,icon:B,readonly:Z,...q}=e,[P,E]=(0,d.useState)(!1),[T,U]=(0,d.useState)(s),z=e=>{E(e),U(e?a.text:a.password)};return(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("div",{children:(0,r.jsx)(r.Fragment,{children:c&&(0,r.jsx)("label",{className:h||"",children:c})})}),(0,r.jsxs)("div",{className:(0,t.AK)(s===a.checkbox?"":o?"border-red-400 border":"border border-gray-400","flex items-center bg-input  mt-1 rounded"),children:[B&&B,(()=>{switch(s){case a.textarea:return(0,r.jsx)("textarea",{id:l,className:M||(0,t.AK)(v?"w-full p-2":"p-2 h-24",m),name:l,required:x,onChange:i,placeholder:u,disabled:p,maxLength:j,autoFocus:b,onFocus:_,autoComplete:w,autoCapitalize:y,ref:f,...q});case a.checkbox:return(0,r.jsx)("input",{type:"checkbox",className:M||(0,t.AK)(v?"":"p-2",m),name:l,required:x,onChange:i,placeholder:u,disabled:p,maxLength:j,autoFocus:b,onFocus:_,autoComplete:w,autoCapitalize:y,ref:f,...q});default:return(0,r.jsx)("input",{id:l,type:T,className:M||(0,t.AK)(v?"w-full":"",m),name:l,required:x,onChange:i,placeholder:u,disabled:p,maxLength:j,autoFocus:b,onFocus:_,autoComplete:w,autoCapitalize:y,onKeyDown:k,onKeyUp:C,ref:f,min:A,max:F,...q})}})(),S&&S,s===a.password&&(0,r.jsx)("div",{onClick:()=>z(!P),className:"px-3",children:P?(0,r.jsx)(n.z5B,{className:"text-xl"}):(0,r.jsx)(n.tjB,{className:"text-xl"})})]}),(0,r.jsx)(r.Fragment,{children:o&&(0,r.jsx)("span",{className:"fs-500 fw-500 text-red-500",children:o.toString()})})]})}}},function(e){e.O(0,[907,536,52,774,888,179],function(){return e(e.s=80016)}),_N_E=e.O()}]);