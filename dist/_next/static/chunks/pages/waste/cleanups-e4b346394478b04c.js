(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[434],{9855:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/waste/cleanups",function(){return a(54584)}])},54584:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return C}});var t=a(85893),l=a(67294),n=a(35636),r=a(71119),c=a(77656),i=a(27484),d=a.n(i),x=a(79537),o=a(63750),h=a(37294),m=a(29562),p=a(1988),u=a(14057),j=a(22920),v=a(79008),g=a(79794),N=e=>{var s,a,r;let{item:c,close:i}=e,{data:d,refetch:x,isLoading:o}=(0,m.du)(),[h,N]=(0,l.useState)(!1),[f]=(0,n.n8)(),[b,w]=(0,l.useState)([]),_=e=>{if(e.target.checked){let s=e.target.value;w(e=>[...e,s])}else b.splice(b.indexOf(e.target.value),1)},y=async()=>{N(!0);let e=new FormData;e.append("cleanup_request_id",c.id);for(let s=0;s<b.length;s++)e.append("service_personnel_id[]",b[s]);await f(e).then(e=>{e.isSuccess?(j.Am.success(e.data.message),i()):(j.Am.error(e.error.data.message),N(!0))}).catch(e=>{}),N(!0)};return(0,t.jsxs)(t.Fragment,{children:[d&&!(null==d?void 0:null===(s=d.data)||void 0===s?void 0:s.length)&&(0,t.jsx)("div",{className:"py-6",children:(0,t.jsx)(g.Z,{imageClass:"w-20 mx-auto",message:"You do not have any service personnel"})}),(0,t.jsx)("div",{className:"grid lg:grid-cols-2 gap-6 max-h-[300px]",children:d&&!!(null==d?void 0:null===(a=d.data)||void 0===a?void 0:a.length)&&(null==d?void 0:null===(r=d.data)||void 0===r?void 0:r.map((e,s)=>(0,t.jsxs)("div",{className:"dash-shade relative p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,t.jsx)("div",{className:"w-[70px]",children:(0,t.jsx)(p.Z,{fname:e.first_name,lname:e.last_name,size:70,text:"23px"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"fw-600 text-xl",children:[e.first_name," ",e.last_name]}),(0,t.jsx)("p",{className:"",children:e.phone})]})]}),(0,t.jsx)("div",{children:(0,t.jsx)("input",{type:"checkbox",value:e.id,className:"w-6 h-6 absolute top-5 right-3",onChange:_})})]},s)))}),d&&(0,t.jsx)("div",{className:"lg:w-7/12 mx-auto mt-12",children:(0,t.jsx)(u.Z,{title:h?(0,t.jsx)(v.Gh,{size:13,color:"white"}):"Submit Personnels",disabled:!b.length,onClick:y})})]})},f=e=>{let{data:s}=e,{Modal:a,setShowModal:n}=(0,h.Z)(),[i,m]=(0,l.useState)(),p=e=>{n(!0),m(e)},u=(0,l.useMemo)(()=>[{Header:"S/N",accessor:(e,s)=>s+1},{Header:"Name",accessor:"zone.name"},{Header:"Schedule Date",accessor:"schedule_date"},{Header:"Date Created",accessor:"created_at",Cell:e=>d()(e.value).format("DD-MMM-YYYY")},{Header:"Residence Count",accessor:"zone.no_of_residence"},{Header:"Status",accessor:"status",Cell:e=>c.LR[e.value]},{Header:"Action",accessor:"id",Cell:e=>(0,t.jsx)("div",{children:(0,t.jsxs)(x.v2,{placement:"bottom-end",children:[(0,t.jsx)(x.Q,{children:(0,t.jsx)(x.zx,{className:"bg-transparent px-0 mx-0 hover:shadow-none text-md flex items-center font-normal shadow-none text-black capitalize",children:(0,t.jsx)(o.FQA,{className:"text-xl"})})}),(0,t.jsx)(x.qy,{children:(0,t.jsx)(x.sN,{onClick:()=>p(e.row.original),children:"Assign Personnels"})})]})})}],[]),j=(0,l.useMemo)(()=>s,[s]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"lg:p-4",children:(0,t.jsx)(r.ZP,{columns:u,data:j})}),(0,t.jsx)(a,{title:"Assign my Personnel",wide:!0,children:(0,t.jsx)(N,{item:i,close:()=>n(!1)})})]})},b=a(47516),w=a(9121),_=e=>{let{item:s}=e,a=[{title:(0,t.jsx)("p",{children:"My Resisdence"}),content:(0,t.jsx)(()=>(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"mt-3 max-w-full max-h-[300px] overflow-auto",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b bg-light",children:[(0,t.jsx)("th",{className:"py-2 text-left px-4",children:"Name"}),(0,t.jsx)("th",{className:"py-2 text-left px-4",children:"Address"}),(0,t.jsx)("th",{className:"py-2 text-left px-4",children:"Cleanup Status"})]})}),(0,t.jsx)("tbody",{children:!!s.home_residence&&s.home_residence.map((e,s)=>(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("td",{className:"px-4 py-2",children:"".concat(e.residence.home_residence.first_name," ").concat(e.residence.home_residence.last_name)}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.residence.home_residence.address}),(0,t.jsx)("td",{className:"px-4 py-4",children:c.LR[e.status]})]},s))})]})})}),{})},{title:(0,t.jsx)("p",{children:"Assigned Personnel"}),content:(0,t.jsx)("p",{})}];return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{children:(0,t.jsx)(w.Z,{tabs:a})})})};let y=()=>{var e,s;let{data:a,isLoading:r}=(0,n.Nx)(),{data:c,isLoading:i}=(0,n.pF)(),{Modal:d,setShowModal:x}=(0,h.Z)(),[o,m]=(0,l.useState)(),p=e=>{m(e),x(!0)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[c&&(0,t.jsxs)("div",{className:"p-5 w-6/12 relative dash-shade text-white flex items-center gap-6 ".concat({PENDING:"bg-gray-400",ONGOING:"bg-orange-800",COMPLETED:"bg-primary"}[c.data.status]),children:[(0,t.jsxs)("div",{className:"w-24 h-24 circle bg-white grid place-content-center text-black",children:[(0,t.jsxs)("p",{className:"text-3xl fw-600",children:["0",(0,t.jsxs)("span",{children:["/",c.data.zone.no_of_residence]})]}),(0,t.jsx)("p",{className:"text-[10px] fw-500",children:"Residence"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"fw-600 text-xl",children:c.data.zone.name}),(0,t.jsx)("div",{className:"flex gap-x-2 itmes-center",children:(0,t.jsx)("p",{children:"Assigned Trucks:"})}),(0,t.jsxs)("div",{className:"flex gap-x-2 itmes-center",children:[(0,t.jsx)("p",{children:"Scheduled Date:"}),(0,t.jsx)("p",{className:"fw-600 fs-800",children:c.data.schedule_date})]})]}),(0,t.jsx)(b.QpC,{className:"text-3xl duration-100 cursor-pointer hover:scale-110 absolute top-3 right-6",onClick:()=>p(c.data)})]}),(0,t.jsxs)("div",{className:"mt-5",children:[(0,t.jsx)("p",{className:"fw-500 lg:text-xl",children:"Pikaboo Scheduled Cleanups"}),(0,t.jsxs)("div",{className:"dash-shade py-6 px-2",children:[r&&(0,t.jsx)("div",{className:"flex justify-center py-12",children:(0,t.jsx)(v.B0,{size:"100"})}),a&&!(null==a?void 0:null===(e=a.data)||void 0===e?void 0:e.length)&&(0,t.jsx)(g.Z,{imageClass:"w-24 mx-auto",message:"No scheduled cleanup available"}),a&&!!(null==a?void 0:null===(s=a.data)||void 0===s?void 0:s.length)&&(0,t.jsx)(f,{data:null==a?void 0:a.data})]})]})]}),(0,t.jsx)(d,{title:"Schedule Details",wide:!0,children:(0,t.jsx)(_,{item:o})})]})};var C=y;y.Layout="Dashboard"},79794:function(e,s,a){"use strict";var t=a(85893);a(67294);var l=a(25675),n=a.n(l);s.Z=e=>{let{message:s,imageClass:a}=e;return(0,t.jsx)("div",{className:"w-full grid place-content-center",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(n(),{src:"https://res.cloudinary.com/greenmouse-tech/image/upload/v1689941389/pikaboo/garbage_empty-removebg-preview_o7ps5z.png",alt:"empty",width:400,height:400,className:a}),(0,t.jsx)("p",{className:"text-center mt-4 text-gray-500",children:s||"No Data Available"})]})})}},9121:function(e,s,a){"use strict";var t=a(85893),l=a(67294),n=a(77656);s.Z=e=>{let{tabs:s,broadcastCurrentIndex:a,users:r,isFixed:c}=e,[i,d]=(0,l.useState)(0);return(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"",children:(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)("nav",{className:r?"-mb-px tab-bar flex lg:space-x-8 space-x-2 overflow-x-auto border-b-2":c?"-mb-px tab-bar flex lg:space-x-8 space-x-4 overflow-x-auto fixed lg:relative top-0 pt-3 lg:pt-0 bg-pri lg:bg-transparent w-full z-10 left-0":"-mb-px tab-bar flex lg:space-x-8 space-x-2 overflow-x-auto","aria-label":"Tabs",children:s.map((e,s)=>(0,t.jsx)("div",{onClick:()=>{d(s),a&&a(s)},className:(0,n.AK)(s===i?"border-tertial  text-tertial":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700","whitespace-nowrap cursor-pointer border-b-2 py-1 px-3 lg:px-4 font-medium lg:text-lg"),children:e.title},s))}),(0,t.jsx)("div",{className:"pt-2",children:s[i].content})]})})})}}},function(e){e.O(0,[874,865,485,774,888,179],function(){return e(e.s=9855)}),_N_E=e.O()}]);